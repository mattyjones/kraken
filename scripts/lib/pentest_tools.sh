#!/bin/bash

#
# This module will install any security related tools including any specific
# configurations I use. File paths for projects such as HTB, OSCP/?, and VHL
# will also be created.
#

#cifs-utils
#remmina (rdp, etc)

# [ ] masscan
# [ ] burp
# [ ] nikto
# [ ] gobuster/dirbuster
# [ ] exploitdb
# [ ] cifs
# [ ] rdp
# [ ] foxyproxy
# [ ] hashcat
# [ ] nmap
# [ ] netcat
# [ ] seclists
# [ ] cewl
# [ ] whatweb
# [ ]
# [ ]

# This is my personal config file for testing and using wraith
# https://github.com/N0MoreSecr3ts/wraith
configure_wraith() {
  mkdir "$HOME/.wraith"
  ln -s "$cwd/wraith/config.yaml" "$HOME/.wraith/config.yaml"

  return 0
}



build_directories() {
        # Install directory structure
        mkdir -p ~/Desktop/Exam/{scripts,config,scratch}
        mkdir -p ~/Desktop/Labs/{scripts,config,scratch}
}

install_masscan() {
  # Install a patched version of masscan. The default version has a bug in the wait functionality
  # that causes it to loop indefinitely and cannot not be used in scripts

  echo "Do you wish to update masscan? [Y/n/l]"
  read -r ans
  if [[ $ans == "" ]] || [[ $ans == "Y" ]]; then
    wget https://github.com/robertdavidgraham/masscan/archive/master.zip &> /dev/null
    unzip master.zip && cd masscan-master || echo "masscan package corrupted"

    if [[ $0 -ne 0 ]]; then
      echo "masscan not downloaded correctly"
      return 1
    fi

    make && make install &> /dev/null

    if [[ $0 -ne 0 ]]; then
      echo "masscan was not built and installed correctly"
      return 1
    fi

    cp ./bin/masscan /usr/bin
    return 0

  else
    echo "masscan not updated"
    return 0
  fi
}

